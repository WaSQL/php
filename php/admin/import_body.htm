<view:default>
<form method="post" name="importform" enctype="multipart/form-data" action="/php/admin.php" onsubmit="return submitForm(this);">
<input type="hidden" name="_menu" value="import" />
<input type="hidden" name="func" value="process" />
<input type="hidden" name="filetype" value="xml" />
<div class="container">
	<h2 style="margin:0px;padding:6px;" class="<?=configValue('admin_color');?>"><span class="icon-import"></span> Import</h2>
	<view:processed>
	<div  style="border:1px dashed #ccc;padding:3px;border-radius: 3px;">
		<div class="w_bigger <?=configValue('admin_color');?>">Import Results</div>
		<textarea style="height:150px;width:100%;border:0px;"><?=json_encode($results,JSON_PRETTY_PRINT|JSON_UNESCAPED_SLASHES|JSON_UNESCAPED_UNICODE);?></textarea>
	</div>
	</view:processed>
	<div>
		<?=importBuildFormField('file');?>
	</div>
	<div style="display:flex;align-items: flex-start;flex-wrap: wrap;border-top:1px dashed #ccc;padding-top:10px;margin-top:15px;">
		<div style="flex:5;padding:10px;">
			<div class="w_bold w_bigger"><span class="icon-file-txt"></span> CSV Import Options</div>
			<div style="margin-top:5px;"><label class="w_red">Database</label><?=importBuildFormField('csvtable_db');?></div>
			<div style="display:flex;margin-top:15px;">
				<div style="flex:5;"><label class="w_red">Table Name</label><?=importBuildFormField('csvtable_name');?></div>
				<div style="flex: 2;margin-left:10px;"><label class="w_red">Chunk Size</label><?=importBuildFormField('csvtable_chunk');?></div>
			</div>
			<div style="display:flex;margin-top:15px;">
				<div style="flex:5;"><label>Upsert</label><?=importBuildFormField('csvtable_upsert');?></div>
				<div style="flex: 2;margin-left:10px;"><label>Upsert On</label><?=importBuildFormField('csvtable_upserton');?></div>
			</div>
			<div style="margin-top:15px;"><label>Where</label><?=importBuildFormField('csvtable_where');?></div>
			<div style="margin:15px 0;"><button type="submit" onclick="document.importform.filetype.value='csv';" class="button btn <?=configValue('admin_color');?>"><span class="icon-file-txt"></span> Import CSV File</button></div>
		</div>
		<div style="flex: 3;padding:10px;">
			<div class="w_bold w_bigger"><span class="icon-file-code"></span> XML Import Options</div>
			<div class="w_padtop"><?=importBuildFormField('xmltypes');?></div>
			<div><?=importBuildFormField('xmloptions');?></div>
			<label>Merge Fields</label>
			<div><?=importBuildFormField('xmlmerge');?></div>
			<div class="w_padtop w_padbot"><button type="submit" onclick="document.importform.filetype.value='xml';" class="button btn <?=configValue('admin_color');?>"><span class="icon-file-code"></span> Import XML File</button></div>
		</div>
</div>
</form>
</view:default>






