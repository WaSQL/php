<view:default>
<?=buildOnLoad("wacss.loadScript('/php/admin/config_js.js');");?>
<h1 style="margin:0px;padding:6px 6px 12px 6px;" class="w_biggest <?=configValue('admin_color');?>"><span class="icon-gear"></span> <wtranslate>WaSQL Configuration</wtranslate></h1>

<div style="margin-top: 0px;padding:0 8px 8px 0;display:flex;flex-wrap:wrap;justify-content: flex-start;align-items: flex-start;max-width:90vw;overflow:auto;">
	<div id="left_content">
		<ul class="nav-list buttons <?=configValue('admin_color');?>" style="width:200px;">
			<li><a href="#config_users" onclick="return configNav(this);" data-nav="/php/admin.php" data-func="config_users"><span class="icon-users"></span> User Authentication</a></li>
			<li><a href="#config_sync" onclick="return configNav(this);" data-nav="/php/admin.php" data-func="config_sync"><span class="icon-sync"></span> Sync Settings</a></li>
			<li><a href="#config_mail" onclick="return configNav(this);" data-nav="/php/admin.php" data-func="config_mail"><span class="icon-mail"></span> SendMail Settings</a></li>
			<li><a href="#config_uploads" onclick="return configNav(this);" data-nav="/php/admin.php" data-func="config_uploads"><span class="icon-upload"></span> File Uploads</a></li>
			<li><a href="#config_uploads" onclick="return configNav(this);" data-nav="/php/admin.php" data-func="config_misc"><span class="icon-dots"></span> Misc Settings</a></li>
		</ul>
	</div>
	<div id="main_content" style="margin-left:15px;flex:1;width:100%;">
    	&nbsp;
  	</div>
</div>
</view:default>

<view:config_users>
	<div class="w_biggest <?=configValue('admin_color');?>"><span class="icon-users"></span> User Authentication</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Authentication Method</label><?=configBuildFormField('auth_method');?></div>
	</div>
	<div id="config_users">
		<?=buildOnLoad("configAuthMethodChanged();");?>
	</div>
</view:config_users>

<view:config_users_save><div class="w_success"><span class="icon-mark"></span> Saved</div></view:config_users_save>

<view:config_users_wasql>
<form method="post" action="/php/admin.php" onsubmit="return ajaxSubmitForm(this,'config_users_save');">
	<input type="hidden" name="_menu" value="config" />
	<input type="hidden" name="func" value="config_users_wasql" />
	<input type="hidden" name="auth_method" value="wasql" />
	<input type="hidden" name="process" value="save" />
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Login Title</label><?=configBuildFormField('login_title');?></div>
	</div>
	<div style="display:flex;">
		<button type="submit" class="btn w_success">Save</button>
		<div id="config_users_save" style="margin-left:15px;"></div>
	</div>
</form>
</view:config_users_wasql>

<view:config_users_ldap>
<form method="post" action="/php/admin.php" onsubmit="return ajaxSubmitForm(this,'config_users_save');">
	<input type="hidden" name="_menu" value="config" />
	<input type="hidden" name="func" value="config_users_ldap" />
	<input type="hidden" name="auth_method" value="ldap" />
	<input type="hidden" name="process" value="save" />
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Login Title</label><?=configBuildFormField('login_title');?></div>
	</div>
	<div class="w_grayback w_bold w_white" style="padding:5px 9px;"><span class="icon-ldap"></span> LDAP Settings</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:3;"><label>Host</label><?=configBuildFormField('authldap');?></div>
		<div style="flex:3;margin-left:15px;"><label>Domain</label><?=configBuildFormField('authldap_domain');?></div>
		<div style="flex:1;margin-left:15px;"><label>LDAPS (secure)?</label><?=configBuildFormField('authldap_secure');?></div>
		<div style="flex:2;margin-left:15px;"><label>Require memberof entry?</label><?=configBuildFormField('authldap_checkmemberof');?></div>
	</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Admins (comma separated)</label><?=configBuildFormField('authldap_admin');?></div>
	</div>
	<div style="display:flex;">
		<button type="submit" class="btn w_success">Save</button>
		<div id="config_users_save" style="margin-left:15px;"></div>
	</div>
</form>
</view:config_users_ldap>

<view:config_users_okta>
<form method="post" action="/php/admin.php" onsubmit="return ajaxSubmitForm(this,'config_users_save');">
	<input type="hidden" name="_menu" value="config" />
	<input type="hidden" name="func" value="config_users_okta" />
	<input type="hidden" name="auth_method" value="okta" />
	<input type="hidden" name="process" value="save" />
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Login Title</label><?=configBuildFormField('login_title');?></div>
	</div>
	<div class="w_grayback w_bold w_white" style="padding:5px 9px;">OKTA Settings</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Client ID</label><?=configBuildFormField('okta_client_id');?></div>
		<div style="flex:1;margin-left:15px;"><label>Client Secret</label><?=configBuildFormField('okta_client_secret');?></div>
	</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Metadata URL</label><?=configBuildFormField('okta_metadata_url');?></div>
	</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Redirect URI</label><?=configBuildFormField('okta_redirect_uri');?></div>
	</div>
	<div style="display:flex;">
		<button type="submit" class="btn w_success">Save</button>
		<div id="config_users_save" style="margin-left:15px;"></div>
	</div>
</form>
</view:config_users_okta>

<view:config_users_okta_ldap>
<form method="post" action="/php/admin.php" onsubmit="return ajaxSubmitForm(this,'config_users_save');">
	<input type="hidden" name="_menu" value="config" />
	<input type="hidden" name="func" value="config_users_okta_ldap" />
	<input type="hidden" name="auth_method" value="okta_ldap" />
	<input type="hidden" name="process" value="save" />
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Login Title</label><?=configBuildFormField('login_title');?></div>
	</div>
	<div class="w_grayback w_bold w_white" style="padding:5px 9px;">OKTA Settings</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Client ID</label><?=configBuildFormField('okta_client_id');?></div>
		<div style="flex:1;margin-left:15px;"><label>Client Secret</label><?=configBuildFormField('okta_client_secret');?></div>
	</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Metadata URL</label><?=configBuildFormField('okta_metadata_url');?></div>
	</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Redirect URI</label><?=configBuildFormField('okta_redirect_uri');?></div>
	</div>
	<div class="w_grayback w_bold w_white" style="padding:5px 9px;"><span class="icon-ldap"></span> LDAP Settings</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:3;"><label>Host</label><?=configBuildFormField('ldap_host');?></div>
		<div style="flex:3;margin-left:15px;"><label>Domain</label><?=configBuildFormField('ldap_domain');?></div>
		<div style="flex:1;margin-left:15px;"><label>LDAPS (secure)?</label><?=configBuildFormField('ldap_secure');?></div>
		<div style="flex:2;margin-left:15px;"><label>Require memberof entry?</label><?=configBuildFormField('ldap_checkmemberof');?></div>
	</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Username</label><?=configBuildFormField('ldap_username');?></div>
		<div style="flex:1;margin-left:15px;"><label>Password</label><?=configBuildFormField('ldap_password');?></div>
	</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Admins (comma separated)</label><?=configBuildFormField('ldap_admins');?></div>
	</div>
	<div style="display:flex;">
		<button type="submit" class="btn w_success">Save</button>
		<div id="config_users_save" style="margin-left:15px;"></div>
	</div>
</form>
</view:config_users_okta_ldap>

<view:config_sync>
<div class="w_biggest <?=configValue('admin_color');?>"><span class="icon-sync"></span> Syncronize Settings</div>
<form method="post" action="/php/admin.php" onsubmit="return ajaxSubmitForm(this,'config_users_save');">
	<input type="hidden" name="_menu" value="config" />
	<input type="hidden" name="func" value="config_sync_form" />
	<input type="hidden" name="process" value="save" />
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Enable Sync?</label><?=configBuildFormField('wasql_synchronize');?></div>
		<div style="flex:3;margin-left:15px;"><label>Target</label><?=configBuildFormField('wasql_synchronize_slave');?></div>
	</div>
	<div style="display:flex;">
		<button type="submit" class="btn w_success">Save</button>
		<div id="config_users_save" style="margin-left:15px;"></div>
	</div>
</form>
</view:config_sync>




<view:config_mail>
<div class="w_biggest <?=configValue('admin_color');?>"><span class="icon-mail"></span> SendMail Settings</div>
<form method="post" action="/php/admin.php" onsubmit="return ajaxSubmitForm(this,'config_users_save');">
	<input type="hidden" name="_menu" value="config" />
	<input type="hidden" name="func" value="config_mail_form" />
	<input type="hidden" name="process" value="save" />
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Login Title</label><?=configBuildFormField('login_title');?></div>
	</div>
	<div class="w_grayback w_bold w_white" style="padding:5px 9px;">SMTP Settings</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Host</label><?=configBuildFormField('smtp');?></div>
		<div style="flex:1;margin-left:15px;"><label>Port</label><?=configBuildFormField('smtpport');?></div>
		<div style="flex:1;margin-left:15px;"><label>Username </label><?=configBuildFormField('smtpuser');?></div>
		<div style="flex:1;margin-left:15px;"><label>Password</label><?=configBuildFormField('smtppass');?></div>
	</div>
	<div class="w_grayback w_bold w_white" style="padding:5px 9px;">Email Settings</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Default From</label><?=configBuildFormField('smtp');?></div>
		<div style="flex:1;margin-left:15px;"><label>Encrypt</label><?=configBuildFormField('email_encrypt');?></div>
		<div style="flex:1;margin-left:15px;"><label>PHP Mailer?</label><?=configBuildFormField('phpmailer');?></div>
	</div>
	<div style="display:flex;">
		<button type="submit" class="btn w_success">Save</button>
		<div id="config_users_save" style="margin-left:15px;"></div>
	</div>
</form>
</view:config_mail>

<view:config_uploads>
<div class="w_biggest <?=configValue('admin_color');?>"><span class="icon-upload"></span> File Uploads</div>
<form method="post" action="/php/admin.php" onsubmit="return ajaxSubmitForm(this,'config_users_save');">
	<input type="hidden" name="_menu" value="config" />
	<input type="hidden" name="func" value="config_uploads_form" />
	<input type="hidden" name="process" value="save" />
	<div class="w_grayback w_bold w_white" style="padding:5px 9px;"><span class="icon-file-image"></span> Image Conversions</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Command</label><?=configBuildFormField('convert_command');?></div>
	</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Extension Mapping (ext-newext comma separated)</label><?=configBuildFormField('convert');?></div>
	</div>
	<div class="w_grayback w_bold w_white" style="padding:5px 9px;"><span class="icon-file-video"></span> Video Conversions</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Command</label><?=configBuildFormField('reencode_command');?></div>
	</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Extension Mapping (ext-newext comma separated)</label><?=configBuildFormField('reencode');?></div>
	</div>
	<div style="display:flex;">
		<button type="submit" class="btn w_success">Save</button>
		<div id="config_users_save" style="margin-left:15px;"></div>
	</div>
</form>
</view:config_uploads>

<view:config_misc>
<div class="w_biggest <?=configValue('admin_color');?>"><span class="icon-dots"></span> Misc Settings</div>
<form method="post" action="/php/admin.php" onsubmit="return ajaxSubmitForm(this,'config_users_save');">
	<input type="hidden" name="_menu" value="config" />
	<input type="hidden" name="func" value="config_misc_form" />
	<input type="hidden" name="process" value="save" />
	<div style="display:flex;flex-wrap: wrap;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Is Stage?</label><?=configBuildFormField('stage');?></div>
		<div style="flex:1;"><label>Enable Cron?</label><?=configBuildFormField('cron');?></div>
		<div style="flex:1;"><label>User Log?</label><?=configBuildFormField('userlog');?></div>
		<div style="flex:1;"><label>Log Queries?</label><?=configBuildFormField('log_queries');?></div>
	</div>
	<div style="display:flex;flex-wrap: wrap;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Admin Color/Theme</label><?=configBuildFormField('admin_color');?></div>
		<div style="flex:1;margin-left:15px;"><label>Pagination Default</label><?=configBuildFormField('paging',array('class'=>'align-right'));?></div>
	</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label>Mysql Backup Command</label><?=configBuildFormField('backup_cmd',array('required'=>''));?></div>
	</div>
	<div style="display:flex;justify-content: flex-start;align-items: flex-start;margin:5px 0 10px 0;">
		<div style="flex:1;"><label><span class="icon-database"></span> SQL Prompt Databases ... leave blank for all</label><?=configBuildFormField('databases',array('required'=>''));?></div>
	</div>
	<div style="display:flex;">
		<button type="submit" class="btn w_success">Save</button>
		<div id="config_users_save" style="margin-left:15px;"></div>
	</div>
</form>
</view:config_misc>

</view:config_item>

