!function(){function e(e,n,t,i){if(this.atOccurrence=!1,this.cm=e,null==i&&(i="string"==typeof n&&n==n.toLowerCase()),t=t?e.clipPos(t):{line:0,ch:0},this.pos={from:t,to:t},"string"!=typeof n)this.matches=function(t,i){if(t)for(var r=e.getLine(i.line).slice(0,i.ch),c=r.match(n),o=0;c;){var h=r.indexOf(c[0]);o+=h,r=r.slice(h+1);var s=r.match(n);if(!s)break;c=s,o++}else var r=e.getLine(i.line).slice(i.ch),c=r.match(n),o=c&&i.ch+r.indexOf(c[0]);return c?{from:{line:i.line,ch:o},to:{line:i.line,ch:o+c[0].length},match:c}:void 0};else{i&&(n=n.toLowerCase());var r=i?function(e){return e.toLowerCase()}:function(e){return e},c=n.split("\n");this.matches=1==c.length?function(t,i){var c,o=r(e.getLine(i.line)),h=n.length;return(t?i.ch>=h&&-1!=(c=o.lastIndexOf(n,i.ch-h)):-1!=(c=o.indexOf(n,i.ch)))?{from:{line:i.line,ch:c},to:{line:i.line,ch:c+h}}:void 0}:function(n,t){var i=t.line,o=n?c.length-1:0,h=c[o],s=r(e.getLine(i)),l=n?s.indexOf(h)+h.length:s.lastIndexOf(h);if(!(n?l>=t.ch||l!=h.length:l<=t.ch||l!=s.length-h.length))for(;;){if(n?!i:i==e.lineCount()-1)return;if(s=r(e.getLine(i+=n?-1:1)),h=c[n?--o:++o],!(o>0&&o<c.length-1)){var f=n?s.lastIndexOf(h):s.indexOf(h)+h.length;if(n?f!=s.length-h.length:f!=h.length)return;var u={line:t.line,ch:l},a={line:i,ch:f};return{from:n?a:u,to:n?u:a}}if(s!=h)return}}}}e.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function n(e){var n={line:e,ch:0};return t.pos={from:n,to:n},t.atOccurrence=!1,!1}for(var t=this,i=this.cm.clipPos(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,i))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!i.line)return n(0);i={line:i.line-1,ch:this.cm.getLine(i.line-1).length}}else{var r=this.cm.lineCount();if(i.line==r-1)return n(r);i={line:i.line+1,ch:0}}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(e){var n=this;this.atOccurrence&&(n.pos.to=this.cm.replaceRange(e,n.pos.from,n.pos.to))}},CodeMirror.defineExtension("getSearchCursor",function(n,t,i){return new e(this,n,t,i)})}();