CodeMirror.defineMode("xml",function(e,t){function n(e,t){function n(n){return t.tokenize=n,n(e,t)}var o=e.next();if("<"==o){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?n(a("atom","]]>")):null:e.match("--")?n(a("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(i(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=a("meta","?>"),"meta";T=e.eat("/")?"closeTag":"openTag",e.eatSpace(),h="";for(var u;u=e.eat(/[^\s\u00a0=<>\"\'\/?]/);)h+=u;return t.tokenize=r,"tag"}if("&"==o){var l;return l=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),l?"atom":"error"}return e.eatWhile(/[^&<]/),null}function r(e,t){var r=e.next();return">"==r||"/"==r&&e.eat(">")?(t.tokenize=n,T=">"==r?"endTag":"selfcloseTag","tag"):"="==r?(T="equals",null):/[\'\"]/.test(r)?(t.tokenize=o(r),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\'\/?]/),"word")}function o(e){return function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=r;break}return"string"}}function a(e,t){return function(r,o){for(;!r.eol();){if(r.match(t)){o.tokenize=n;break}r.next()}return e}}function i(e){return function(t,r){for(var o;null!=(o=t.next());){if("<"==o)return r.tokenize=i(e+1),r.tokenize(t,r);if(">"==o){if(1==e){r.tokenize=n;break}return r.tokenize=i(e-1),r.tokenize(t,r)}}return"meta"}}function u(){for(var e=arguments.length-1;e>=0;e--)v.cc.push(arguments[e])}function l(){return u.apply(null,arguments),!0}function f(e,t){var n=C.doNotIndent.hasOwnProperty(e)||v.context&&v.context.noIndent;v.context={prev:v.context,tagName:e,indent:v.indented,startOfLine:t,noIndent:n}}function c(){v.context&&(v.context=v.context.prev)}function s(e){if("openTag"==e)return v.tagName=h,l(m,d(v.startOfLine));if("closeTag"==e){var t=!1;return t=v.context?v.context.tagName!=h:!0,t&&(z="error"),l(g(t))}return l()}function d(e){return function(t){return"selfcloseTag"==t||"endTag"==t&&C.autoSelfClosers.hasOwnProperty(v.tagName.toLowerCase())?l():"endTag"==t?(f(v.tagName,e),l()):l()}}function g(e){return function(t){return e&&(z="error"),"endTag"==t?(c(),l()):(z="error",l(arguments.callee))}}function m(e){return"word"==e?(z="attribute",l(k,m)):"endTag"==e||"selfcloseTag"==e?u():(z="error",l(m))}function k(e){return"equals"==e?l(x,m):(C.allowMissing||(z="error"),"endTag"==e||"selfcloseTag"==e?u():l())}function x(e){return"string"==e?l(p):"word"==e&&C.allowUnquoted?(z="string",l()):(z="error","endTag"==e||"selfCloseTag"==e?u():l())}function p(e){return"string"==e?l(p):u()}var h,T,v,z,w=e.indentUnit,C=t.htmlMode?{autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!1}:{autoSelfClosers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},M=t.alignCDATA;return{startState:function(){return{tokenize:n,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(e,t){if(e.sol()&&(t.startOfLine=!0,t.indented=e.indentation()),e.eatSpace())return null;z=T=h=null;var n=t.tokenize(e,t);if(t.type=T,(n||T)&&"comment"!=n)for(v=t;;){var r=t.cc.pop()||s;if(r(T||n))break}return t.startOfLine=!1,z||n},indent:function(e,t,o){var a=e.context;if(e.tokenize!=r&&e.tokenize!=n||a&&a.noIndent)return o?o.match(/^(\s*)/)[0].length:0;if(M&&/<!\[CDATA\[/.test(t))return 0;for(a&&/^<\//.test(t)&&(a=a.prev);a&&!a.startOfLine;)a=a.prev;return a?a.indent+w:0},compareStates:function(e,t){if(e.indented!=t.indented||e.tokenize!=t.tokenize)return!1;for(var n=e.context,r=t.context;;n=n.prev,r=r.prev){if(!n||!r)return n==r;if(n.tagName!=r.tagName)return!1}},electricChars:"/"}}),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0});