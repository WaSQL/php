var MojoZoom=function(){function e(e,t,o){var l=function(e){return o(e||window.event)};e.addEventListener?e.addEventListener(t,l,!1):e.attachEvent&&e.attachEvent("on"+t,l)}function t(e){for(var t=e.offsetLeft,o=e.offsetTop,l=e.offsetParent;l;)t+=l.offsetLeft-l.scrollLeft,o+=l.offsetTop-l.scrollTop,l=l.offsetParent;return{x:t,y:o}}function o(e,o){var l=document.body.scrollLeft||document.documentElement.scrollLeft,n=document.body.scrollTop||document.documentElement.scrollTop;if(o.currentTarget){var i=t(e);return{x:o.clientX-i.x+l,y:o.clientY-i.y+n}}return{x:o.offsetX,y:o.offsetY}}function l(a,d,r,m,f,y){return a.complete||a.__mojoZoomQueued?(a.__mojoZoomQueued=!1,setTimeout(function(){var l=!!document.all&&!!window.attachEvent&&!window.opera,p=a.offsetWidth,c=a.offsetHeight,u=a.parentNode;if("A"!=u.nodeName){var v=n("a");v.setAttribute("href",d),u.replaceChild(v,a),v.appendChild(a)}else var v=u;v.style.position="relative",v.style.display="block",v.style.width=p+"px",v.style.height=c+"px";var h=a.offsetLeft,x=a.offsetTop,_=n("div");_.className="mojozoom_marker";var g=n("img");g.className="mojozoom_img",g.style.position="absolute",g.style.left="-9999px",g.style.top="-9999px",g.style.maxWidth="none",g.style.maxHeight="none",g.style.zIndex=10000001,d==a.src&&(g.style.width="300%",g.style.height="auto"),document.body.appendChild(g);var b=a.parentNode,j=n("div");j.style.position="absolute",j.style.left=h+"px",j.style.top=x+"px",j.style.width=p+"px",j.style.height=c+"px",j.style.overflow="hidden",j.style.display="none",j.appendChild(_),b.appendChild(j);var E=b;a.__mojoZoomOverlay&&b.removeChild(a.__mojoZoomOverlay),a.__mojoZoomOverlay=j,a.__mojoZoomImage&&a.__mojoZoomImage.parentNode&&a.__mojoZoomImage.parentNode.removeChild(a.__mojoZoomImage),a.__mojoZoomImage=g;var N=!1;if(!r){r=n("div"),r.className="mojozoom_imgctr";var w=t(a);r.style.left=p+w.x+"px",r.style.top=w.y+"px",r.style.width=(m?m:i)+"px",r.style.height=(f?f:s)+"px",document.body.appendChild(r),N=!0}r.style.overflow="hidden",y||(r.style.visibility="hidden"),e(g,"load",function(){if(g.parentNode){var i=g.offsetWidth?g.offsetWidth:g.naturalWidth,s=g.offsetHeight?g.offsetHeight:g.naturalHeight,d=r.offsetWidth,m=r.offsetHeight,f=i/p,u=s/c,v=Math.round(d/f),b=Math.round(m/u);document.body.removeChild(g),r.appendChild(g);var w=n("div");w.className="mojozoom_fill",_.appendChild(w);var Z=n("div");Z.className="mojozoom_border",_.appendChild(Z),_.style.width=v+"px",_.style.height=b+"px",y&&(_.style.left="0px",_.style.top="0px",g.style.left="0px",g.style.top="0px");var C=!1;y||(e(E,"mouseout",function(e){var t=e.target||e.srcElement;if(t&&"DIV"==t.nodeName){var o=e.relatedTarget||e.toElement;if(o){for(;o!=t&&"BODY"!=o.nodeName&&o.parentNode;)o=o.parentNode;o!=t&&(C=!1,j.style.display="none",r.style.visibility="hidden")}}}),e(document.body,"mouseover",function(e){C&&e.toElement!=Z&&e.target!=Z&&(j.style.display="none",r.style.visibility="hidden",C=!1)})),e(E,"mousemove",function(e){C=!0;var n=t(a);N&&(r.style.left=p+n.x+"px",r.style.top=n.y+"px"),j.style.display="block",r.style.visibility="visible";var i=o(E,e);if(e.srcElement&&l){if(e.srcElement==_)return;if(e.srcElement!=E){var s=t(e.srcElement);i.x-=n.x-s.x,i.y-=n.y-s.y}}var y=v/2,w=b/2;l||(i.x-=h,i.y-=x),i.x<y&&(i.x=y),i.x>p-y&&(i.x=p-y),i.y<w&&(i.y=w),i.y>c-w&&(i.y=c-w);var Z=i.x-y|0,T=i.y-w|0;_.style.left=Z+"px",_.style.top=T+"px",g.style.left=-(i.x*f-d/2|0)+"px",g.style.top=-(i.y*u-m/2|0)+"px"})}}),setTimeout(function(){g.src=d},1)},1),void 0):(e(a,"load",function(){a.__mojoZoomQueued=!0,setTimeout(function(){l(a,d,r,m,f,y)},1)}),void 0)}var n=function(e){return document.createElement(e)},i=256,s=256;return{addEvent:e,makeZoomable:l}}();