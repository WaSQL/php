function Html5Chart(t){var i="string"==typeof t?document.getElementById(t):t;this.ctx=i.getContext("2d"),this.width=this.ctx.canvas.width,this.height=this.ctx.canvas.height,this.numberOfDecimals=0,this.proportionalSizes=!0,this.widthSizeFactor=this.width/400,this.heightSizeFactor=this.height/400,this.chartType="bar",this.randomColors=!1,this.animate=!1,this.animationFrames=60,this.marginTop=10,this.marginBottom=10,this.marginLeft=10,this.marginRight=10,this.labelMargin=10,this.dataValueMargin=20,this.titleMargin=10,this.yAxisLabelMargin=5,this.data=new Array,this.labels=new Array,this.colors=new Array,this.title=null,this.backgroundFillStyle="rgba(255,255,255,0)",this.borderStrokeStyle="rgba(255,255,255,0)",this.borderWidth=1,this.labelFillStyle="rgb(220, 36, 0)",this.labelFont="sans-serif",this.labelFontHeight=12,this.labelFontStyle="",this.dataValueFillStyle="#333",this.dataValueFont="sans-serif",this.dataValueFontHeight=15,this.dataValueFontStyle="",this.titleFillStyle="#333",this.titleFont="sans-serif",this.titleFontHeight=16,this.titleFontStyle="bold",this.yAxisLabelFillStyle="#333",this.yAxisLabelFont="sans-serif",this.yAxisLabelFontHeight=10,this.yAxisLabelFontStyle="";var a=this.ctx.createLinearGradient(0,0,0,this.height);a.addColorStop(.2,"#fdfdfd"),a.addColorStop(.8,"#ededed"),this.chartBackgroundFillStyle=a,this.chartBorderStrokeStyle="#999",this.chartBorderLineWidth=1,this.chartHorizontalLineStrokeStyle="#999",this.chartHorizontalLineWidth=1,this.chartVerticalLineStrokeStyle="#999",this.chartVerticalLineWidth=1,this.chartMarkerSize=5,this.chartPointRadius=4,this.chartPointFillStyle="rgb(150, 36, 0)",this.chartLineStrokeStyle="rgba(150, 36, 0, 0.5)",this.chartLineWidth=2,this.barFillStyle="rgb(220, 36, 0)",this.barStrokeStyle="#fff",this.barBorderWidth=2,this.barShadowColor="rgba(0, 0, 0, 0.5)",this.barShadowBlur=5,this.barShadowOffsetX=3,this.barShadowOffsetY=0,this.barHGap=20,this.barVGap=20,this.explosionOffset=20,this.pieFillStyle="rgb(220, 36, 0)",this.pieStrokeStyle="#fff",this.pieBorderWidth=2,this.pieShadowColor="rgba(0, 0, 0, 0.5)",this.pieShadowBlur=5,this.pieShadowOffsetX=3,this.pieShadowOffsetY=0,this.pieStart=0,this.pieTotal=null,this.generateRandomColor=function(){for(var t=new Array,i=0;3>i;i++)t.push(Math.ceil(150*Math.random()+50));return"rgb("+t.join(",")+")"},this.setChartDataFromJSON=function(t){for(var i in t)this.labels.push(i),this.data.push(t[i])},this.draw=function(){var t=this.ctx;t.lineCap="round";var i=Math.min(this.widthSizeFactor,this.heightSizeFactor);if(this.proportionalSizes&&(this.labelMargin=this.labelMargin*this.heightSizeFactor,this.dataValueMargin=this.dataValueMargin*this.heightSizeFactor,this.titleMargin=this.titleMargin*this.heightSizeFactor,this.yAxisLabelMargin=this.yAxisLabelMargin*this.heightSizeFactor,this.labelFontHeight=this.labelFontHeight*i,this.dataValueFontHeight=this.dataValueFontHeight*i,this.titleFontHeight=this.titleFontHeight*i,this.yAxisLabelFontHeight=this.yAxisLabelFontHeight*i,this.barHGap=this.barHGap*this.widthSizeFactor,this.barVGap=this.barHGap*this.heightSizeFactor,this.explosionOffset=this.explosionOffset*i),this.randomColors)for(var a=0;a<this.data.length;a++)this.colors[a]||(this.colors[a]=this.generateRandomColor());"pie"==this.chartType?this.animate?this.animatePieChart("pie"):this.drawPieChart(!1):"ring"==this.chartType||"doughnut"==this.chartType?this.animate?this.animatePieChart("ring"):this.drawPieChart(!0):"exploded pie"==this.chartType?this.animate?this.animatePieChart("exploded"):this.drawExplodedPieChart():"horizontal bars"==this.chartType?this.animate?this.animateVerticalBarChart():this.drawVerticalBarChart():"pareto"==this.chartType?this.drawParetoChart():this.animate?this.animateBarChart():this.drawBarChart(),this.drawTitleAndBorders()},this.drawTitleAndBorders=function(){var t=this.ctx;null!=this.title&&(t.font=this.titleFontStyle+" "+this.titleFontHeight+"px "+this.titleFont,t.fillStyle=this.titleFillStyle,t.textAlign="center",t.textBaseline="bottom",t.fillText(this.title,this.width/2,this.marginTop+this.titleFontHeight,this.width-10)),t.lineWidth=this.borderWidth,t.strokeStyle=this.borderStrokeStyle,t.strokeRect(0,0,this.width,this.height),t.globalCompositeOperation="destination-over",t.fillStyle=this.backgroundFillStyle,t.fillRect(0,0,this.width,this.height),t.globalCompositeOperation="source-over"},this.drawBarChart=function(){var t=this.ctx,i=this.data.length,a=this.data.max(),e=this.data.min(),h=(this.width-this.marginLeft-this.marginRight-(i-1)*this.barHGap)/i,s=this.marginTop+this.labelMargin+this.labelFontHeight+this.dataValueMargin+this.dataValueFontHeight,l=this.height-this.marginBottom;null!=this.title&&(s+=this.titleFontHeight+this.titleMargin);var r=this.height-this.marginBottom;0>e&&(l=this.height-this.marginBottom-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight,r=l+(this.height-this.marginBottom-s-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight)*e/(Math.abs(e)+a));for(var o=Math.max(Math.abs(r-s),Math.abs(r-l)),n=Math.max(Math.abs(e),Math.abs(a)),d=this.marginLeft,g=r,m=0,b=0,f=0;f<this.data.length;f++)b=this.data[f],m=b*o/n,t.fillStyle=this.colors[f]?this.colors[f]:this.barFillStyle,t.strokeStyle=this.barStrokeStyle,t.lineWidth=this.barBorderWidth,t.beginPath(),t.moveTo(d,g),t.lineTo(d,g-m),t.lineTo(d+h,g-m),t.lineTo(d+h,g),t.save(),t.shadowOffsetX=this.barShadowOffsetX,t.shadowOffsetY=this.barShadowOffsetY,t.shadowBlur=this.barShadowBlur,t.shadowColor=this.barShadowColor,t.fill(),t.restore(),t.stroke(),t.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont,t.fillStyle=this.colors[f]?this.colors[f]:this.labelFillStyle,t.textAlign="center",this.labels[f]&&(b>=0?(t.textBaseline="bottom",t.fillText(this.labels[f],d+h/2,r-m-this.labelMargin,h)):(t.textBaseline="top",t.fillText(this.labels[f],d+h/2,r-m+this.labelMargin,h))),t.font=this.dataValueFontStyle+" "+this.dataValueFontHeight+"px "+this.dataValueFont,t.fillStyle=this.dataValueFillStyle,t.textAlign="center",b>=0?(t.textBaseline="bottom",t.fillText(b,d+h/2,r-m-this.labelMargin-this.dataValueMargin,h)):(t.textBaseline="top",t.fillText(b,d+h/2,r-m+this.labelMargin+this.dataValueMargin,h)),d=d+h+this.barHGap},this.animateBarChart=function(){var t=this,i=this.animationFrames,a=0,e=this.data.max(),h=this.data.min(),s=this.marginTop+this.labelMargin+this.labelFontHeight+this.dataValueMargin+this.dataValueFontHeight,l=barBottomY=this.height-this.marginBottom;null!=this.title&&(s+=this.titleFontHeight+this.titleMargin),0>h&&(l=this.height-this.marginBottom-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight,barBottomY=l+(this.height-this.marginBottom-s-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight)*h/(Math.abs(h)+e));var r=l-s,o=0,n=0,d=0;if(0>h){var g=Math.max(Math.abs(barBottomY-s),Math.abs(barBottomY-l)),m=Math.max(Math.abs(h),Math.abs(e));d=Math.abs(h*g/m+this.labelMargin+this.labelFontHeight)}this.marginBottom+=d,null!=this.title?this.titleMargin+=r-d:this.marginTop+=r-d,o=d/i,n=(r-d)/i;var b=function(){a++<i&&(t.marginBottom-=o,null!=t.title?t.titleMargin-=n:t.marginTop-=n,t.ctx.clearRect(0,0,t.width,t.height),t.drawBarChart(),t.drawTitleAndBorders(),"function"==typeof window.requestAnimationFrame?window.requestAnimationFrame(b):"function"==typeof window.msRequestAnimationFrame?window.msRequestAnimationFrame(b):"function"==typeof window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(b):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(b):setTimeout(b,16.6666666))};b()},this.drawVerticalBarChart=function(){var t=this.ctx;t.save(),t.translate(this.width/2,this.height/2),t.rotate(Math.PI/2),t.translate(-this.width/2,-this.height/2);var i=this.data.length,a=this.data.max(),e=this.data.min(),h=this.marginLeft;null!=this.title&&(h+=this.titleFontHeight+this.titleMargin);var s=(this.width-h-this.marginRight-(i-1)*this.barHGap)/i;t.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont;for(var l=0,r=0,o=0;o<this.labels.length;o++)r=t.measureText(this.labels[o]).width,r>l&&(l=r);t.font=this.dataValueFontStyle+" "+this.dataValueFontHeight+"px "+this.dataValueFont;for(var n=0,d=0,o=0;o<this.data.length;o++)d=t.measureText(this.data[o]).width,d>n&&(n=d);var g=this.marginTop+Math.max(this.labelMargin+l,this.dataValueMargin+n),m=this.height-this.marginBottom,b=this.height-this.marginBottom;0>e&&(m=this.height-this.marginBottom-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight,b=m+(this.height-this.marginBottom-g-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight)*e/(Math.abs(e)+a));for(var f=Math.max(Math.abs(b-g),Math.abs(b-m)),u=Math.max(Math.abs(e),Math.abs(a)),S=h,F=b,w=0,p=0,o=0;o<this.data.length;o++)p=this.data[o],w=p*f/u,t.fillStyle=this.colors[o]?this.colors[o]:this.barFillStyle,t.strokeStyle=this.barStrokeStyle,t.lineWidth=this.barBorderWidth,t.beginPath(),t.moveTo(S,F),t.lineTo(S,F-w),t.lineTo(S+s,F-w),t.lineTo(S+s,F),t.save(),t.shadowOffsetX=this.barShadowOffsetX,t.shadowOffsetY=this.barShadowOffsetY,t.shadowBlur=this.barShadowBlur,t.shadowColor=this.barShadowColor,t.fill(),t.restore(),t.stroke(),t.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont,t.fillStyle=this.colors[o]?this.colors[o]:this.labelFillStyle,t.save(),t.translate(S+s/2,b-w),t.rotate(-Math.PI/2),t.textBaseline="top",this.labels[o]&&(p>=0?(t.textAlign="left",t.fillText(this.labels[o],this.labelMargin,0)):(t.textAlign="right",t.fillText(this.labels[o],-this.labelMargin,0))),t.font=this.dataValueFontStyle+" "+this.dataValueFontHeight+"px "+this.dataValueFont,t.fillStyle=this.dataValueFillStyle,t.textBaseline="bottom",p>=0?(t.textAlign="left",t.fillText(p,this.labelMargin,0)):(t.textAlign="right",t.fillText(p,-this.labelMargin,0)),t.restore(),S=S+s+this.barHGap;t.restore()},this.animateVerticalBarChart=function(){var t=this,i=this.animationFrames,a=0,e=this.data.max(),h=this.data.min(),s=this.data.length,l=this.ctx,r=this.marginLeft;marginTop=this.marginTop,marginTopCurrent=0,null!=this.title&&(r+=this.titleFontHeight+this.titleMargin);(this.width-r-this.marginRight-(s-1)*this.barHGap)/s;l.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont;for(var o=0,n=0,d=0;d<this.labels.length;d++)n=l.measureText(this.labels[d]).width,n>o&&(o=n);l.font=this.dataValueFontStyle+" "+this.dataValueFontHeight+"px "+this.dataValueFont;for(var g=0,m=0,d=0;s>d;d++)m=l.measureText(this.data[d]).width,m>g&&(g=m);var b=this.marginTop+Math.max(this.labelMargin+o,this.dataValueMargin+g),f=this.height-this.marginBottom,u=this.height-this.marginBottom;0>h&&(f=this.height-this.marginBottom-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight,u=f+(this.height-this.marginBottom-b-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight)*h/(Math.abs(h)+e));var S=Math.max(Math.abs(u-b),Math.abs(u-f)),F=Math.max(Math.abs(h),Math.abs(e)),w=0;0>h&&(w=Math.abs(h*S/F));var p=e*S/F+w,c=0,y=0;this.marginBottom+=w,this.marginTop+=p-w,c=w/i,y=(p-w)/i;var x=function(){a++<i&&(t.marginBottom-=c,t.marginTop-=y,t.ctx.clearRect(0,0,t.width,t.height),t.drawVerticalBarChart(),marginTopCurrent=t.marginTop,t.marginTop=marginTop,t.drawTitleAndBorders(),t.marginTop=marginTopCurrent,"function"==typeof window.requestAnimationFrame?window.requestAnimationFrame(x):"function"==typeof window.msRequestAnimationFrame?window.msRequestAnimationFrame(x):"function"==typeof window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(x):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(x):setTimeout(x,16.6666666))};x()},this.drawPieChart=function(t){var i=this.ctx;i.lineWidth=this.pieBorderWidth;for(var a=0,e=0,h=this.data.length,s=0;h>s;s++)if(e+=this.data[s],this.data[s]<0)return;a=null==this.pieTotal?e:this.pieTotal;var l=this.width-this.marginLeft-this.marginRight,r=this.height-this.marginTop-this.marginBottom;this.title&&(r=r-this.titleFontHeight-this.titleMargin);var o=this.width/2,n=this.marginTop+r/2;this.title&&(n+=this.titleFontHeight+this.titleMargin);var d=2*Math.PI,g=Math.min(l,r)/2;i.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont;for(var m=0,b=0,s=0;s<this.labels.length;s++)b=i.measureText(this.labels[s]).width,b>m&&(m=b);g=g-m-this.labelMargin;for(var f=this.pieStart*d/e,u=f,S=0,F=0,s=0;h>s;s++)i.beginPath(),F=this.data[s]*d/a,S=u+F,i.moveTo(o,n),i.arc(o,n,g,u,S,!1),i.lineTo(o,n),u=S,i.fillStyle=this.colors[s]?this.colors[s]:this.pieFillStyle,i.fill(),i.strokeStyle=this.pieStrokeStyle,i.stroke();if(i.save(),i.shadowOffsetX=this.pieShadowOffsetX,i.shadowOffsetY=this.pieShadowOffsetY,i.translate(o,n),i.beginPath(),i.moveTo(0,0),i.arc(0,0,g,f,S,!1),i.shadowBlur=this.pieShadowBlur,i.shadowColor=this.pieShadowColor,i.globalCompositeOperation="destination-over",i.fillStyle="rgba(0,0,0,1.0)",i.fill(),i.restore(),t){var w=g/2;i.save(),i.beginPath(),i.moveTo(o+w,n),i.arc(o,n,w+this.pieBorderWidth,f,S,!1),i.fillStyle=this.pieStrokeStyle,i.fill(),i.restore(),i.save(),i.beginPath(),i.moveTo(o+w,n),i.arc(o,n,w,0,d,!1),i.globalCompositeOperation="destination-out",i.fillStyle="#000",i.fill(),i.restore(),i.save(),i.shadowOffsetX=this.pieShadowOffsetX,i.shadowOffsetY=this.pieShadowOffsetY,i.translate(o,n),i.beginPath(),i.arc(0,0,w,f,S,!1),i.shadowBlur=this.pieShadowBlur,i.shadowColor=this.pieShadowColor,i.globalCompositeOperation="destination-over",i.strokeStyle=this.pieStrokeStyle,i.stroke(),i.restore()}var u=this.pieStart*d/e,S=0,F=0;i.beginPath();for(var s=0;s<this.data.length;s++){i.save(),F=this.data[s]*d/a,S=u+F;var p=u+F/2;if(i.translate(o,n),i.rotate(p),i.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont,i.fillStyle=this.colors[s]?this.colors[s]:this.labelFillStyle,i.textAlign="start",this.labels[s]){if(p>Math.PI/2&&p<=3*(Math.PI/2)){var c=g+this.labelMargin+i.measureText(this.labels[s]).width/2;i.translate(c,0),i.rotate(Math.PI),i.translate(-c,0)}i.textBaseline="middle",i.fillText(this.labels[s],g+this.labelMargin,0)}i.restore(),u=S}},this.drawExplodedPieChart=function(){var t=this.ctx;t.lineWidth=this.pieBorderWidth;for(var i=0,a=0,e=this.data.length,h=0;e>h;h++)if(a+=this.data[h],this.data[h]<0)return;i=null==this.pieTotal?a:this.pieTotal;var s=this.width-this.marginLeft-this.marginRight,l=this.height-this.marginTop-this.marginBottom;null!=this.title&&(l=l-this.titleFontHeight-this.titleMargin);var r=this.width/2,o=this.marginTop+l/2;this.title&&(o+=this.titleFontHeight+this.titleMargin);var n=2*Math.PI,d=Math.min(s,l)/2;t.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont;for(var g=0,m=0,h=0;h<this.labels.length;h++)m=t.measureText(this.labels[h]).width,m>g&&(g=m);d=d-g-this.labelMargin;for(var b=this.pieStart*n/a,f=0,u=0,S=0,F=0,h=0;h<this.data.length;h++){if(t.save(),u=this.data[h]*n/i,f=b+u,S=u/2,F=b+S,t.translate(r,o),t.rotate(b),t.rotate(S),t.translate(this.explosionOffset,0),t.rotate(-S),t.beginPath(),t.moveTo(0,0),t.arc(0,0,d,0,u,!1),t.lineTo(0,0),t.save(),t.shadowOffsetX=this.pieShadowOffsetX,t.shadowOffsetY=this.pieShadowOffsetY,t.shadowBlur=this.pieShadowBlur,t.shadowColor=this.pieShadowColor,t.fillStyle=this.colors[h]?this.colors[h]:this.pieFillStyle,t.fill(),t.restore(),t.strokeStyle=this.pieStrokeStyle,t.stroke(),t.rotate(S),t.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont,t.fillStyle=this.colors[h]?this.colors[h]:this.labelFillStyle,t.textAlign="start",this.labels[h]){if(F>Math.PI/2&&F<=3*(Math.PI/2)){var w=d+this.labelMargin+t.measureText(this.labels[h]).width/2;t.translate(w,0),t.rotate(Math.PI),t.translate(-w,0)}t.textBaseline="middle",t.fillText(this.labels[h],d+this.labelMargin,0)}t.restore(),b=f}},this.animatePieChart=function(t){{var i=0,a=this.pieTotal,e=this,h=this.animationFrames,s=0,l=(this.width-this.marginLeft-this.marginRight,this.height-this.marginTop-this.marginBottom),r=this.marginTop;this.marginLeft}this.title&&(l=l-this.titleFontHeight-this.titleMargin,r+=this.titleFontHeight+this.titleMargin);for(var o=0;o<this.data.length;o++)if(i+=this.data[o],this.data[o]<0)return;null==a&&(a=i);var n=function(){s++<h&&(e.ctx.clearRect(0,0,e.width,e.height),e.pieTotal=i*(h/s)*(a/i),"pie"==t?e.drawPieChart(!1):"ring"==t?e.drawPieChart(!0):"exploded"==t&&e.drawExplodedPieChart(),e.drawTitleAndBorders(),"function"==typeof window.requestAnimationFrame?window.requestAnimationFrame(n):"function"==typeof window.msRequestAnimationFrame?window.msRequestAnimationFrame(n):"function"==typeof window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(n):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(n):setTimeout(n,16.6666666))};n()},this.drawParetoChart=function(){for(var t=this.ctx,i=this.data.length,a=new Array,e=0;e<this.data.length;e++)a.push(e);a.numericSortReverse(this.data);for(var h=(this.data[a[0]],this.data[a[a.length-1]],0),e=0;e<this.data.length;e++)if(h+=this.data[a[e]],this.data[a[e]]<0)return;h=h.toFixed(this.numberOfDecimals);var s=new Array;s.push(0);for(var e=1;10>e;e++)s.push((h*e/10).toFixed(this.numberOfDecimals));s.push(h),t.font=this.yAxisLabelFontStyle+" "+this.yAxisLabelFontHeight+"px "+this.yAxisLabelFont;for(var l=0,r=0,e=0;e<s.length;e++)r=t.measureText(s[e]).width,r>l&&(l=r);var o=t.measureText("100%").width,n=this.width-this.marginLeft-this.marginRight-2*this.chartMarkerSize-l-o-2*this.yAxisLabelMargin,d=this.height-this.marginTop-this.marginBottom,g=this.marginLeft+this.chartMarkerSize+l+this.yAxisLabelMargin,m=this.marginTop;this.title&&(d-=this.titleFontHeight+this.titleMargin,m+=this.titleFontHeight+this.titleMargin),t.save(),t.translate(g,m),t.fillStyle=this.chartBackgroundFillStyle,t.fillRect(0,0,n,d);var b=d/10,f=0;t.lineWidth=this.chartHorizontalLineWidth,t.font=this.yAxisLabelFontStyle+" "+this.yAxisLabelFontHeight+"px "+this.yAxisLabelFont;for(var e=0;10>=e;e++)f=e*b,e>0&&10>e&&(t.strokeStyle=this.chartHorizontalLineStrokeStyle,t.beginPath(),t.moveTo(0,f),t.lineTo(n,f),t.stroke()),t.strokeStyle=this.chartBorderStrokeStyle,t.beginPath(),t.moveTo(-this.chartMarkerSize,f),t.lineTo(0,f),t.stroke(),t.beginPath(),t.moveTo(n,f),t.lineTo(n+this.chartMarkerSize,f),t.stroke(),t.fillStyle=this.yAxisLabelFillStyle,t.textAlign="right",t.textBaseline="middle",t.fillText(s[10-e],-this.chartMarkerSize-this.yAxisLabelMargin,f),t.textAlign="left",t.fillText(10*(10-e)+"%",n+this.chartMarkerSize+this.yAxisLabelMargin,f);t.save(),t.translate(0,d);for(var u=(n-2*this.barHGap)/i,S=0,F=u/2,w=0,p=this.barHGap,c=p,y=0,x=0,M=0,e=0;e<this.data.length;e++)S=this.data[a[e]]*d/h,t.fillStyle=this.colors[e]?this.colors[e]:this.barFillStyle,t.strokeStyle=this.barStrokeStyle,t.lineWidth=this.barBorderWidth,t.beginPath(),t.moveTo(p,w),t.lineTo(p,w-S),t.lineTo(p+u,w-S),t.lineTo(p+u,w),t.save(),t.shadowOffsetX=this.barShadowOffsetX,t.shadowOffsetY=this.barShadowOffsetY,t.shadowBlur=this.barShadowBlur,t.shadowColor=this.barShadowColor,t.fill(),t.restore(),t.stroke(),x=c,M=y,c=p+u,y-=S,e==this.data.length-1&&(y=-d),t.strokeStyle=this.chartLineStrokeStyle,t.lineWidth=this.chartLineWidth,t.beginPath(),t.moveTo(c,y),t.lineTo(x,M),t.stroke(),t.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont,t.fillStyle=this.colors[e]?this.colors[e]:this.labelFillStyle,t.textAlign="center",this.labels[a[e]]&&(this.data[a[e]]>=0?(t.textBaseline="bottom",t.fillText(this.labels[a[e]],p+F,-S-this.labelMargin,u)):(t.textBaseline="top",t.fillText(this.labels[a[e]],p+F,-S+this.labelMargin,u))),t.font=this.dataValueFontStyle+" "+this.dataValueFontHeight+"px "+this.dataValueFont,t.fillStyle=this.dataValueFillStyle,t.textAlign="center",this.data[a[e]]>=0?(t.textBaseline="bottom",t.fillText(this.data[a[e]],p+F,-S-this.labelMargin-this.dataValueMargin,u)):(t.textBaseline="top",t.fillText(this.data[a[e]],p+F,-S+this.labelMargin+this.dataValueMargin,u)),p+=u;p=this.barHGap,c=p,y=0,x=0,M=0,t.fillStyle=this.chartPointFillStyle,t.beginPath(),t.arc(c,y,this.chartPointRadius,0,2*Math.PI,!1),t.fill();for(var e=0;e<this.data.length;e++)S=this.data[a[e]]*d/h,x=c,M=y,c=p+u,y-=S,e==this.data.length-1&&(y=-d),t.fillStyle=this.chartPointFillStyle,t.beginPath(),t.arc(c,y,this.chartPointRadius,0,2*Math.PI,!1),t.fill(),p+=u;t.restore(),t.lineWidth=this.chartBorderLineWidth,t.strokeStyle=this.chartBorderStrokeStyle,t.strokeRect(0,0,n,d),t.restore()}}Array.prototype.numericSortReverse=function(t){this.sort(function(i,a){return t[a]-t[i]})},Array.prototype.max=function(){for(var t=this[0],i=this.length,a=1;i>a;a++)this[a]>t&&(t=this[a]);return t},Array.prototype.min=function(){for(var t=this[0],i=this.length,a=1;i>a;a++)this[a]<t&&(t=this[a]);return t};